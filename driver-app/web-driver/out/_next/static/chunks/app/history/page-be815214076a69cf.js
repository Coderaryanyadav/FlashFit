(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{5137:function(e,t,s){Promise.resolve().then(s.bind(s,3477))},3477:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var r=s(7437),i=s(2265),a=s(5978),n=s(1694),d=s(3301);let l=(0,s(8301).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);var c=s(8470);function o(){let[e,t]=(0,i.useState)([]),[s,o]=(0,i.useState)(!0),[u,x]=(0,i.useState)(null);return((0,i.useEffect)(()=>{let e=(0,d.Aj)(n.I8,e=>{x(e),e||o(!1)});return()=>e()},[]),(0,i.useEffect)(()=>{if(!u)return;let e=(0,a.IO)((0,a.hJ)(n.db,"orders"),(0,a.ar)("driverId","==",u.uid)),s=(0,a.cf)(e,e=>{t(e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>["delivered","returning","warehouse_reached","completed"].includes(e.status)).sort((e,t)=>{var s,r;let i=(null===(s=e.updatedAt)||void 0===s?void 0:s.toDate)?e.updatedAt.toDate():new Date(0);return((null===(r=t.updatedAt)||void 0===r?void 0:r.toDate)?t.updatedAt.toDate():new Date(0)).getTime()-i.getTime()})),o(!1)},e=>{console.error("Error fetching history:",e),o(!1)});return()=>s()},[u]),s)?(0,r.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:"Loading..."}):(0,r.jsxs)("div",{className:"min-h-screen bg-black text-white pb-24 px-4 pt-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Delivery History"}),0===e.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center opacity-50",children:[(0,r.jsx)("p",{className:"text-lg font-bold",children:"No deliveries yet"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Completed orders will appear here"})]}):(0,r.jsx)("div",{className:"space-y-4",children:e.map(e=>{var t,s,i,a;return(0,r.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800 p-4 rounded-2xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-white",children:(null===(t=e.shippingAddress)||void 0===t?void 0:t.name)||"Customer"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 line-clamp-1",children:(null===(s=e.shippingAddress)||void 0===s?void 0:s.street)||"Address hidden"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("span",{className:"text-green-400 font-bold block",children:["â‚¹",e.deliveryFee||40]}),(0,r.jsx)("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Earning"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500 border-t border-white/5 pt-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(l,{className:"h-3 w-3"}),(null===(i=e.updatedAt)||void 0===i?void 0:i.toDate)?e.updatedAt.toDate().toLocaleDateString():"Unknown Date"]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(c.Z,{className:"h-3 w-3"}),(null===(a=e.updatedAt)||void 0===a?void 0:a.toDate)?e.updatedAt.toDate().toLocaleTimeString():"Unknown Time"]}),(0,r.jsx)("div",{className:"ml-auto px-2 py-0.5 rounded bg-zinc-800 text-zinc-400 uppercase text-[10px] font-bold",children:e.status.replace("_"," ")})]}),e.items&&e.items.length>0&&(0,r.jsx)("div",{className:"mt-3 pt-3 border-t border-white/5 space-y-2",children:e.items.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,r.jsxs)("span",{className:"text-gray-300",children:[e.title," ",(0,r.jsxs)("span",{className:"text-gray-500",children:["x",e.quantity]})]}),(0,r.jsx)("span",{className:"font-medium ".concat("returned"===e.status?"text-yellow-500":"text-green-500"),children:"returned"===e.status?"Returned":"Delivered"})]},t))})]},e.id)})})]})}},1694:function(e,t,s){"use strict";s.d(t,{I8:function(){return o},db:function(){return c},wk:function(){return u}});var r=s(738),i=s(3301),a=s(5978),n=s(62),d=s(5434);let l=0===(0,r.C6)().length?(0,r.ZF)({apiKey:"AIzaSyCcO8q6G08EPk047pncwT0UdJLiDB3WJ6I",authDomain:"studio-847805730-4f392.firebaseapp.com",projectId:"studio-847805730-4f392",storageBucket:"studio-847805730-4f392.firebasestorage.app",messagingSenderId:"497323679456",appId:"1:497323679456:web:fef3f0e6e3af943969ba85"}):(0,r.C6)()[0],c=(0,a.ad)(l),o=(0,i.v0)(l);(0,n.cF)(l);let u=(0,d.$C)(l)},8470:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8301).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])}},function(e){e.O(0,[358,139,25,971,117,744],function(){return e(e.s=5137)}),_N_E=e.O()}]);