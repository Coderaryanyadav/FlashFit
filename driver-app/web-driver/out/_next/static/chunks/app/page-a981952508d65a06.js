(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6731:function(e,t,s){Promise.resolve().then(s.bind(s,1509))},1509:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return D}});var r=s(7437),i=s(2265),n=s(3301),a=s(1694),l=s(5978),d=s(5434),o=s(2869),c=s(5956),u=s(8125),x=s(6697),m=s(5208),h=s(8470),g=s(2271),p=s(5763),b=s(9811),f=s(2618),v=s(7166),j=s(1914),N=s(3869),y=s(9376),w=s(429),k=s(5095),z=s(4891),C=s(6869);function S(e){let{open:t,onOpenChange:s,children:i}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,r.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl max-w-md w-full relative overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,r.jsx)("button",{className:"absolute top-4 right-4 text-zinc-400 hover:text-white transition-colors",onClick:()=>s(!1),children:(0,r.jsx)(z.Z,{className:"h-5 w-5"})}),i]})}):null}function O(e){let{children:t,className:s}=e;return(0,r.jsx)("div",{className:(0,C.cn)("p-6",s),children:t})}function I(e){let{children:t,className:s}=e;return(0,r.jsx)("div",{className:(0,C.cn)("mb-4",s),children:t})}function E(e){let{children:t,className:s}=e;return(0,r.jsx)("h2",{className:(0,C.cn)("text-xl font-bold text-white",s),children:t})}function _(e){let{children:t,className:s}=e;return(0,r.jsx)("p",{className:(0,C.cn)("text-sm text-gray-400 mt-1",s),children:t})}function A(e){let{children:t,className:s}=e;return(0,r.jsx)("div",{className:(0,C.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 mt-6",s),children:t})}function D(){var e,t,s,z,C,D,Z,U,F;let[P,J]=(0,i.useState)(null),[T,B]=(0,i.useState)(!0),[L,M]=(0,i.useState)(!1),[R,q]=(0,i.useState)([]),[W,G]=(0,i.useState)({earnings:0,deliveries:0,onlineSince:null,todayOnlineMinutes:0}),[Q,V]=(0,i.useState)(0),[H,K]=(0,i.useState)(!1),[Y,$]=(0,i.useState)([]),[X,ee]=(0,i.useState)(!1),[et,es]=(0,i.useState)(!1),[er,ei]=(0,i.useState)(""),en=(0,y.useRouter)(),{activeOrder:ea,updateStatus:el}=function(e){let[t,s]=(0,i.useState)(null),[r,n]=(0,i.useState)(!0);(0,i.useEffect)(()=>{if(!e){n(!1);return}let t=(0,l.IO)((0,l.hJ)(a.db,"orders"),(0,l.ar)("driverId","==",e.uid),(0,l.ar)("status","in",["assigned","picked_up","delivered","returning","warehouse_reached"])),r=(0,l.cf)(t,e=>{if(e.empty)s(null);else{let t=e.docs[0];s({id:t.id,...t.data()})}n(!1)});return()=>r()},[e]);let d=async s=>{if(t&&e)try{await (0,l.r7)((0,l.JU)(a.db,"orders",t.id),{status:s,lastUpdated:(0,l.Bt)()})}catch(e){throw console.error("Error updating status:",e),e}};return{activeOrder:t,loading:r,updateStatus:d}}(P),ed=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;"undefined"!=typeof navigator&&navigator.vibrate&&navigator.vibrate(e)};(0,i.useEffect)(()=>{let e=(0,n.Aj)(a.I8,e=>{e?J(e):en.push("/login"),B(!1)});return()=>e()},[en]),(0,i.useEffect)(()=>{if(!P)return;let e=(0,l.JU)(a.db,"drivers",P.uid),t=(0,l.cf)(e,e=>{if(e.exists()){var t;let s=e.data();console.log("Driver data from Firestore:",s),M(!0===s.isOnline),G({earnings:s.totalEarnings||0,deliveries:s.totalDeliveries||0,onlineSince:(null===(t=s.onlineSince)||void 0===t?void 0:t.toDate())||null,todayOnlineMinutes:s.todayOnlineMinutes||0})}else console.log("Driver document does not exist")},e=>{console.error("Error syncing driver status:",e)});return()=>t()},[P]),(0,i.useEffect)(()=>{if(!L||!W.onlineSince){V(0);return}let e=()=>{V((new Date().getTime()-W.onlineSince.getTime())/1e3/60)};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[L,W.onlineSince]);let eo=async()=>{if(!P)return;ed(50);let e=!L;console.log("Toggling online status from",L,"to",e);try{let t={isOnline:e,status:e?"online":"offline",lastSeen:(0,l.Bt)()};if(e)t.onlineSince=(0,l.Bt)();else if(W.onlineSince){let e=(new Date().getTime()-W.onlineSince.getTime())/1e3/60;t.todayOnlineMinutes=(0,l.nP)(e),t.onlineSince=null}console.log("Updating driver document with:",t),await (0,l.r7)((0,l.JU)(a.db,"drivers",P.uid),t),console.log("Driver document updated successfully"),e&&navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{await (0,l.pl)((0,l.JU)(a.db,"driverLocations",P.uid),{driverId:P.uid,driverName:P.displayName||P.email||"Driver",latitude:e.coords.latitude,longitude:e.coords.longitude,status:"online",lastUpdated:(0,l.Bt)()},{merge:!0})},e=>{console.error("Location error:",e),alert("Please enable location access to go online")}):e||await (0,l.pl)((0,l.JU)(a.db,"driverLocations",P.uid),{status:"offline",lastUpdated:(0,l.Bt)()},{merge:!0})}catch(e){console.error("Error toggling status:",e),alert("Failed to update status. Please try again.")}};(0,i.useEffect)(()=>{if(!L||!P)return;let e=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(async e=>{try{await (0,l.pl)((0,l.JU)(a.db,"driverLocations",P.uid),{driverId:P.uid,driverName:P.displayName||P.email||"Driver",latitude:e.coords.latitude,longitude:e.coords.longitude,status:"online",lastUpdated:(0,l.Bt)()},{merge:!0})}catch(e){console.error("Error updating location:",e)}},e=>console.error("Location error:",e))};e();let t=setInterval(e,1e4);return()=>clearInterval(t)},[L,P]),(0,i.useEffect)(()=>{if(!L||!P){q([]);return}let e=(0,l.IO)((0,l.hJ)(a.db,"orders"),(0,l.ar)("status","in",["placed","pending","confirmed"])),t=(0,l.cf)(e,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));q(t),t.length>R.length&&ed([50,50,50])});return()=>t()},[L,P]);let ec=async e=>{if(P){ed(20);try{let t=(0,l.JU)(a.db,"orders",e.id);await (0,l.i3)(a.db,async e=>{let s=await e.get(t);if(!s.exists())throw"Order does not exist!";let r=s.data();if("placed"!==r.status&&"pending"!==r.status&&"confirmed"!==r.status)throw"Order is no longer available.";let i=(0,l.JU)(a.db,"drivers",P.uid),n=await e.get(i),d=n.exists()?n.data():{};e.update(t,{status:"assigned",driverId:P.uid,driverName:P.displayName||"Driver",driverPhone:d.phone||P.phoneNumber||"",updatedAt:(0,l.Bt)()})}),q(t=>t.filter(t=>t.id!==e.id)),ed([50,100,50])}catch(e){console.error("Error accepting order:",e),alert("Failed: "+(e.message||e))}}},eu=async e=>{if(ea&&P){ed(20);try{await el(e),ed(50)}catch(t){console.error("Error updating status to ".concat(e,":"),t),alert("Failed to update status.")}}},ex=()=>{if(!(null==ea?void 0:ea.items)){eu("delivered");return}$(ea.items.map(e=>e.id||e.productId)),K(!0)},em=async()=>{if(ea&&P){if(4!==er.length){alert("Please enter a valid 4-digit OTP");return}ee(!0),ed(20);try{let e=(0,d.V1)(a.wk,"completeOrder");await e({orderId:ea.id,otp:er,deliveredItemIds:Y}),K(!1),ei(""),ed([100,50,100])}catch(e){console.error("Error confirming delivery:",e),alert("Failed to confirm delivery: ".concat(e.message))}finally{ee(!1)}}},eh=(()=>{if(!ea)return null;switch(ea.status){case"assigned":return{label:"Pick Up Order",action:()=>eu("picked_up"),disabled:!1,style:"bg-white text-black hover:bg-gray-200"};case"picked_up":return{label:"Complete Delivery",action:()=>ex(),disabled:!1,style:"bg-green-500 text-white hover:bg-green-600"};case"delivered":return{label:"Return to Warehouse",action:()=>eu("returning"),disabled:!1,style:"bg-yellow-500 text-black hover:bg-yellow-600"};case"returning":return{label:"Check In at Warehouse",action:()=>eu("warehouse_reached"),disabled:!1,style:"bg-blue-500 text-white hover:bg-blue-600"};case"warehouse_reached":return{label:"Waiting for Approval",action:()=>{},disabled:!0,style:"bg-zinc-700 text-zinc-400 cursor-not-allowed"};default:return{label:"Unknown Status",action:()=>{},disabled:!0,style:"bg-gray-500"}}})(),eg=(e,t)=>{window.open("https://www.google.com/maps/dir/?api=1&destination=".concat(e,",").concat(t),"_blank")};return T?(0,r.jsxs)("div",{className:"flex h-screen items-center justify-center bg-black text-white flex-col gap-4",children:[(0,r.jsx)(c.Z,{className:"h-8 w-8 animate-spin text-green-500"}),(0,r.jsx)("p",{className:"text-gray-400 animate-pulse font-medium",children:"Loading Driver App..."})]}):P?(0,r.jsxs)("div",{className:"min-h-screen bg-black text-white pb-24 font-sans selection:bg-green-500 selection:text-black",children:[(0,r.jsx)("header",{className:"fixed top-0 inset-x-0 z-50 bg-black/80 backdrop-blur-md border-b border-white/10 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between max-w-md mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 bg-zinc-900 border border-zinc-700 rounded-full flex items-center justify-center shadow-[0_0_15px_rgba(255,255,255,0.1)]",children:(0,r.jsx)("span",{className:"text-white font-black text-lg",children:"D"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"font-bold text-lg leading-none",children:"FlashFit Driver"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsx)("div",{className:"h-2 w-2 rounded-full ".concat(L?"bg-green-500 animate-pulse shadow-[0_0_10px_#22c55e]":"bg-red-500")}),(0,r.jsx)("span",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider",children:L?"Online":"Offline"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-zinc-900 rounded-full px-4 py-2 border border-zinc-800",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 text-green-400"}),(0,r.jsx)("span",{className:"text-sm font-bold",children:W.earnings})]})]})}),(0,r.jsx)("main",{className:"pt-32 px-4 max-w-md mx-auto",children:L?(0,r.jsxs)("div",{className:"space-y-6",children:[!ea&&(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-zinc-900/50 border border-zinc-800 p-5 rounded-3xl hover:bg-zinc-900 transition-colors",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-500/20 flex items-center justify-center mb-3",children:(0,r.jsx)(m.Z,{className:"h-5 w-5 text-blue-400"})}),(0,r.jsx)("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wider",children:"Deliveries"}),(0,r.jsx)("p",{className:"text-3xl font-bold mt-1 text-white",children:W.deliveries})]}),(0,r.jsxs)("div",{className:"bg-zinc-900/50 border border-zinc-800 p-5 rounded-3xl hover:bg-zinc-900 transition-colors",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-purple-500/20 flex items-center justify-center mb-3",children:(0,r.jsx)(h.Z,{className:"h-5 w-5 text-purple-400"})}),(0,r.jsx)("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wider",children:"Online Hours"}),(0,r.jsx)("p",{className:"text-3xl font-bold mt-1 text-white",children:((W.todayOnlineMinutes+Q)/60).toFixed(1)})]})]}),!ea&&(0,r.jsxs)("button",{onClick:eo,className:"w-full bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 text-red-400 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2 active:scale-95",children:[(0,r.jsx)(x.Z,{className:"h-5 w-5"}),"GO OFFLINE"]}),(0,r.jsx)(k.M,{mode:"wait",children:ea?(0,r.jsxs)(w.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-zinc-900 border-2 border-green-500/50 rounded-[2rem] overflow-hidden shadow-[0_0_60px_rgba(34,197,94,0.3)] relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-green-500/10 to-transparent pointer-events-none"}),(0,r.jsxs)("div",{className:"bg-green-600 px-6 py-4 flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"font-bold text-white flex items-center gap-2",children:[(0,r.jsx)(g.Z,{className:"h-5 w-5"})," Current Delivery"]}),(0,r.jsx)("span",{className:"text-xs font-bold bg-black/20 px-3 py-1 rounded-full text-white backdrop-blur-sm",children:"EST. 15 MIN"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"h-14 w-14 rounded-2xl bg-zinc-800 flex items-center justify-center shrink-0 border border-zinc-700",children:(0,r.jsx)(p.Z,{className:"h-7 w-7 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-1",children:(null===(e=ea.shippingAddress)||void 0===e?void 0:e.name)||"Customer"}),(0,r.jsxs)("p",{className:"text-gray-400 leading-tight text-sm",children:[null===(t=ea.shippingAddress)||void 0===t?void 0:t.street,", ",null===(s=ea.shippingAddress)||void 0===s?void 0:s.city]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 bg-black/40 rounded-2xl p-2 pr-4 border border-white/5",children:[(0,r.jsx)(o.z,{size:"icon",variant:"ghost",className:"h-12 w-12 rounded-xl text-white hover:bg-zinc-800",onClick:()=>{var e;return window.open("tel:".concat((null===(e=ea.shippingAddress)||void 0===e?void 0:e.phone)||ea.customerPhone),"_self")},children:(0,r.jsx)(b.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-wider",children:"Contact"}),(0,r.jsx)("p",{className:"font-bold text-sm",children:null===(z=ea.shippingAddress)||void 0===z?void 0:z.phone})]}),(0,r.jsxs)(o.z,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full px-6 h-10 font-bold shadow-lg shadow-blue-900/20",onClick:()=>{var e;return(null===(e=ea.shippingAddress)||void 0===e?void 0:e.location)&&eg(ea.shippingAddress.location.lat,ea.shippingAddress.location.lng)},children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2"})," Navigate"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-2",children:[(0,r.jsxs)("div",{className:"bg-zinc-800/50 rounded-xl p-3",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Amount"}),(0,r.jsxs)("p",{className:"text-lg font-bold",children:["₹",ea.totalAmount]})]}),(0,r.jsxs)("div",{className:"bg-zinc-800/50 rounded-xl p-3",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Items"}),(0,r.jsxs)("p",{className:"text-lg font-bold",children:[(null===(C=ea.items)||void 0===C?void 0:C.length)||1," items"]})]})]}),(0,r.jsxs)("div",{className:"bg-zinc-800/30 rounded-2xl border border-white/5 overflow-hidden",children:[(0,r.jsxs)("button",{onClick:()=>es(!et),className:"w-full flex items-center justify-between p-4 text-sm font-bold text-gray-300 hover:bg-white/5 transition-colors",children:[(0,r.jsx)("span",{children:"Order Items"}),et?(0,r.jsx)(f.Z,{className:"h-4 w-4"}):(0,r.jsx)(v.Z,{className:"h-4 w-4"})]}),et&&(0,r.jsx)("div",{className:"p-4 pt-0 space-y-3",children:null===(D=ea.items)||void 0===D?void 0:D.map((e,t)=>(0,r.jsxs)("div",{className:"flex gap-3 items-center bg-black/20 p-2 rounded-lg",children:[(0,r.jsx)("div",{className:"h-10 w-10 bg-zinc-800 rounded-md flex items-center justify-center shrink-0",children:e.image?(0,r.jsx)("img",{src:e.image,alt:e.title,className:"h-full w-full object-cover rounded-md"}):(0,r.jsx)(m.Z,{className:"h-5 w-5 text-gray-500"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-white truncate",children:e.title}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Qty: ",e.quantity," • ₹",e.price]})]})]},t))})]}),eh&&(0,r.jsx)(o.z,{onClick:eh.action,disabled:eh.disabled,className:"w-full font-bold h-16 text-lg rounded-2xl shadow-xl transition-transform active:scale-95 ".concat(eh.style),children:eh.label})]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,r.jsx)("h2",{className:"font-bold text-xl text-white",children:"Available Orders"}),(0,r.jsxs)("span",{className:"text-xs font-bold bg-zinc-800 text-gray-400 px-2 py-1 rounded-md border border-zinc-700",children:[R.length," NEARBY"]})]}),0===R.length?(0,r.jsxs)("div",{className:"py-24 flex flex-col items-center justify-center text-center space-y-6 opacity-50",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-blue-500/20 blur-2xl rounded-full animate-pulse"}),(0,r.jsx)("div",{className:"h-24 w-24 bg-zinc-900 rounded-full flex items-center justify-center relative z-10 border border-zinc-800 shadow-xl",children:(0,r.jsx)(g.Z,{className:"h-10 w-10 text-blue-400 animate-spin-slow"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-lg text-white",children:"Scanning Area..."}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Finding orders near your location"})]})]}):(0,r.jsx)("div",{className:"space-y-4 pb-24",children:R.map(e=>{var t,s;return(0,r.jsxs)(w.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-zinc-900 border border-zinc-800 p-5 rounded-3xl active:scale-[0.98] transition-transform touch-manipulation shadow-lg relative overflow-hidden group",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"bg-blue-500/10 text-blue-400 border border-blue-500/20 text-[10px] font-bold px-2 py-1 rounded-md uppercase tracking-wider animate-pulse",children:"New Request"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Just now"})]}),(0,r.jsxs)("span",{className:"text-xl font-black text-green-400",children:["₹",e.totalAmount]})]}),(0,r.jsxs)("div",{className:"flex gap-4 mb-6 relative z-10",children:[(0,r.jsx)("div",{className:"absolute left-[11px] top-3 bottom-3 w-0.5 bg-zinc-800"}),(0,r.jsxs)("div",{className:"flex flex-col gap-8 z-10",children:[(0,r.jsx)("div",{className:"h-6 w-6 rounded-full bg-zinc-800 border-4 border-black flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-2 w-2 rounded-full bg-gray-500"})}),(0,r.jsx)("div",{className:"h-6 w-6 rounded-full bg-white border-4 border-black flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-2 w-2 rounded-full bg-black"})})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-wider mb-0.5",children:"Pickup"}),(0,r.jsx)("p",{className:"font-medium text-sm text-gray-300",children:"FlashFit Store, Goregaon"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-wider mb-0.5",children:"Dropoff"}),(0,r.jsx)("p",{className:"font-bold text-white text-lg leading-tight",children:(null===(t=e.shippingAddress)||void 0===t?void 0:t.city)||"Customer Location"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 truncate mt-1",children:(null===(s=e.shippingAddress)||void 0===s?void 0:s.pincode)||"Area details hidden"})]})]})]}),(0,r.jsx)(o.z,{onClick:()=>ec(e),className:"w-full bg-white text-black hover:bg-gray-200 font-bold h-14 rounded-2xl text-lg shadow-lg transition-transform active:scale-95 relative z-10",children:"Accept Order"})]},e.id)})})]})})]}):(0,r.jsxs)(w.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center py-20 space-y-8",children:[(0,r.jsxs)("div",{className:"relative group cursor-pointer",onClick:eo,children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-green-500/20 blur-3xl rounded-full group-hover:bg-green-500/30 transition-all duration-500 animate-pulse"}),(0,r.jsxs)("div",{className:"relative h-44 w-44 rounded-full bg-white text-black flex flex-col items-center justify-center gap-2 shadow-[0_0_50px_rgba(255,255,255,0.2)] hover:scale-105 transition-transform duration-300 border-4 border-green-500/10",children:[(0,r.jsx)(x.Z,{className:"h-14 w-14 text-green-600"}),(0,r.jsx)("span",{className:"font-black text-2xl tracking-tight",children:"GO ONLINE"})]})]}),(0,r.jsx)("p",{className:"text-gray-400 text-center max-w-xs text-lg",children:"Tap to start receiving delivery requests in your area."})]})}),(0,r.jsx)(S,{open:H,onOpenChange:K,children:(0,r.jsxs)(O,{className:"bg-zinc-900 border-zinc-800 text-white sm:max-w-md",children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(E,{className:"text-xl font-bold",children:"Confirm Delivery"}),(0,r.jsx)(_,{className:"text-gray-400",children:"Ask customer for the OTP. Select items delivered."})]}),(0,r.jsxs)("div",{className:"px-4 pt-4",children:[(0,r.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block",children:"Delivery OTP"}),(0,r.jsx)("input",{type:"text",maxLength:4,value:er,onChange:e=>ei(e.target.value.replace(/\D/g,"")),placeholder:"0 0 0 0",className:"w-full bg-black border border-zinc-700 rounded-xl p-4 text-center text-3xl font-black tracking-[1em] focus:outline-none focus:border-green-500 transition-colors text-white placeholder:text-zinc-800"})]}),(0,r.jsxs)("div",{className:"py-4 space-y-4 max-h-[60vh] overflow-y-auto",children:[null==ea?void 0:null===(Z=ea.items)||void 0===Z?void 0:Z.map((e,t)=>{let s=e.id||e.productId,i=Y.includes(s);return(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl border transition-all cursor-pointer ".concat(i?"bg-green-500/10 border-green-500/50":"bg-zinc-800 border-zinc-700"),onClick:()=>{i?$(e=>e.filter(e=>e!==s)):$(e=>[...e,s])},children:[(0,r.jsx)("div",{className:"h-6 w-6 rounded-full border-2 flex items-center justify-center transition-colors ".concat(i?"bg-green-500 border-green-500":"border-gray-500"),children:i&&(0,r.jsx)(j.Z,{className:"h-4 w-4 text-black"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-bold text-sm",children:e.title}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["Qty: ",e.quantity," • ₹",e.price]})]}),!i&&(0,r.jsx)("span",{className:"text-xs font-bold text-yellow-500 bg-yellow-500/10 px-2 py-1 rounded",children:"RETURN"})]},t)}),Y.length!==(null==ea?void 0:null===(U=ea.items)||void 0===U?void 0:U.length)&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-xl text-yellow-500 text-sm",children:[(0,r.jsx)(N.Z,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:[(null==ea?void 0:null===(F=ea.items)||void 0===F?void 0:F.length)-Y.length," items will be marked as returned."]})]})]}),(0,r.jsxs)(A,{className:"gap-2 sm:gap-0",children:[(0,r.jsx)(o.z,{variant:"ghost",onClick:()=>K(!1),className:"text-gray-400 hover:text-white hover:bg-zinc-800",children:"Cancel"}),(0,r.jsx)(o.z,{onClick:em,disabled:X,className:"bg-green-500 text-black hover:bg-green-600 font-bold",children:X?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"mr-2 h-4 w-4 animate-spin"})," Processing..."]}):"Confirm & Complete"})]})]})})]}):null}},2869:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var r=s(7437),i=s(2265),n=s(5293),a=s(535),l=s(6869);let d=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=i.forwardRef((e,t)=>{let{className:s,variant:i,size:a,asChild:o=!1,...c}=e,u=o?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(d({variant:i,size:a,className:s})),ref:t,...c})});o.displayName="Button"},6869:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(1994),i=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.m6)((0,r.W)(t))}},1694:function(e,t,s){"use strict";s.d(t,{I8:function(){return c},db:function(){return o},wk:function(){return u}});var r=s(738),i=s(3301),n=s(5978),a=s(62),l=s(5434);let d=0===(0,r.C6)().length?(0,r.ZF)({apiKey:"AIzaSyCcO8q6G08EPk047pncwT0UdJLiDB3WJ6I",authDomain:"studio-847805730-4f392.firebaseapp.com",projectId:"studio-847805730-4f392",storageBucket:"studio-847805730-4f392.firebasestorage.app",messagingSenderId:"497323679456",appId:"1:497323679456:web:fef3f0e6e3af943969ba85"}):(0,r.C6)()[0],o=(0,n.ad)(d),c=(0,i.v0)(d);(0,a.cF)(d);let u=(0,l.$C)(d)}},function(e){e.O(0,[358,139,25,321,719,971,117,744],function(){return e(e.s=6731)}),_N_E=e.O()}]);